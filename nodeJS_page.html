<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Node.js CheatSheet</title>
	<link rel="stylesheet" type="text/css" href="../CSS/styles.css">
	<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700;900&display=swap" rel="stylesheet">  
</head>
<body>
	<header>
	<h1>Node.js CheatSheet</h1>
		<nav id="nav">
			<ul class="nav_bar">
				<li><a href="#terminal" class="nav_bar_button">Terminal Commands</a></li>
				<li><a href="#modules" class="nav_bar_button">Modules</a></li>
				<li><a href="#init" class="nav_bar_button">Node server initialization</a></li>
				<li><a href="#express" class="nav_bar_button">Express</a></li>
				<li><a href="#" class="nav_bar_button"></a></li>
			</ul>
			<a href="../index.html" class="homepage_button">Back to Homepage</a>
		</nav>
	</header>

	<main>

		<!-- About Terminal Commands -->

		<section>
			<h2 id="terminal">Terminal Commands</h2>
			<table class="table">
				<thead>
					<th><h3>Code</h3></th>
					<th><h3>Meaning</h3></th>
				</thead>
				<tbody>
                    <tr>
						<td>node -v</td>
						<td>Checks the installed version of Node.js.</td>
					</tr>
					<tr>
						<td>node</td>
						<td>Accesses the REPL.</td>
					</tr>
					<tr>
						<td>.editor</td>
						<td>Enters editor mode.</td>
					</tr>
					<tr>
						<td>global</td>
						<td>Accesses the global object in REPL.</td>
					</tr>
					<tr>
						<td>node 'program name'</td>
						<td>Runs a program.</td>
					</tr>
					<tr>
						<td>require('module').builtinModules</td>
						<td>Get a list of the Core Modules.</td>
					</tr>
					<tr>
						<td>node server</td>
						<td>Logs the data of the server in the terminal.</td>
					</tr>
					<tr>
						<td></td>
						<td></td>
					</tr>
					
				</tbody>
			</table>
		</section>

        		<!-- About Modules -->

		<section>
			<h2 id="modules">Modules</h2>
			<table class="table">
				<thead>
					<th><h3>Code</h3></th>
					<th><h3>Meaning</h3></th>
				</thead>
				<tbody>
                    <tr>
						<td>require()</td>
						<td></td>
					</tr>
					<tr>
						<td>console.log()</td>
						<td>Logs a command.</td>
					</tr>
					<tr>
						<td>console.table()</td>
						<td>Prints a table.</td>
					</tr>
					<tr>
						<td>console.assert()</td>
						<td>Asserts stuff.</td>
					</tr>
					<tr>
						<td></td>
						<td></td>
					</tr>
					<tr>
						<td></td>
						<td></td>
					</tr>
					<tr>
						<td></td>
						<td></td>
					</tr>
					
				</tbody>
			</table>
		</section>

		<!-- About Server init -->

		<section>
			<h2 id="init">Server initialization</h2>
			<table class="table">
				<thead>
					<th><h3>Code</h3></th>
					<th><h3>Meaning</h3></th>
				</thead>
				<tbody>
					<tr>
						<td>Create backend folder</td>
						<td></td>
					</tr>
					<tr>
						<td>npm init</td>
						<td>Initialize the node project</td>
					</tr>
					<tr>
						<td>ni server.js</td>
						<td>Create server.js</td>
					</tr>
					<tr>
						<td>ni .gitignore >> node_modules</td>
						<td>Creates the gitignore file to ignore node_modules</td>
					</tr>
					<tr>
						<td>git init</td>
						<td>Initializes the repository</td>
					</tr>
					<tr>
						<td>const http = require('http'); <br> <br>
							const server = http.createServer((req, res) => { <br>
								res.end('Voilà la réponse du serveur !'); <br>
							}); <br> <br>	
							server.listen(process.env.PORT || 3000);</td>
						<td>Initializes the server port.</td>
					</tr>
					<tr>
						<td>const http = require('http');<br>
							const app = require('./app');<br>
							app.set('port', process.env.PORT || 3000);<br>
							const server = http.createServer(app);<br>
							server.listen(process.env.PORT || 3000);</td>
						<td>Initializes the server with the app.</td>
					</tr>
					<tr>
						<td>npm install -g nodemon</td>
						<td>Installs nodemon</td>
					</tr>
					<tr>
						<td>nodemon server</td>
						<td>Init Nodemon (actualises the server in real time).</td>
					</tr>
					<tr>
						<td>function normalizePort(val) {<br>
							var port = parseInt(val, 10);<br>
						  
							if (isNaN(port)) {<br>
							  // named pipe <br>
							  return val;<br>
							}<br>
						  <br>
							if (port >= 0) {<br>
							  // port number<br>
							  return port;<br>
							}<br>
							<br>
							return false;<br>
						  }</td>
						<td>Makes sure the port is returning a number.</td>
					</tr>
					<tr>
						<td>const errorHandler = error => {</br>
							if (error.syscall !== 'listen') {</br>
							  throw error;</br>
							}</br>
							const address = server.address();</br>
							const bind = typeof address === 'string' ? 'pipe ' + address : 'port: ' + port;</br>
							switch (error.code) {</br>
							  case 'EACCES':</br>
								console.error(bind + ' requires elevated privileges.');</br>
								process.exit(1);</br>
								break;</br>
							  case 'EADDRINUSE':</br>
								console.error(bind + ' is already in use.');</br>
								process.exit(1);</br>
								break;</br>
							  default:</br>
								throw error;</br>
							}</br>
						    };<br>
						    server.on('error', errorHandler);</td>
						<td>Error handling function.</td>
					</tr>
					<tr>
						<td>server.on('listening', () => {<br>
							const address = server.address();<br>
							const bind = typeof address === 'string' ? 'pipe ' + address : 'port ' + port;<br>
							console.log('Listening on ' + bind);<br>
						  });<br>
						  <br>
						  server.listen(port);</td>
						<td>Server event listener that logs the port or canal used by the server.</td>
					</tr>
					<tr>
						<td></td>
						<td></td>
					</tr>
					<tr>
						<td></td>
						<td></td>
					</tr>
					<tr>
						<td></td>
						<td></td>
					</tr>
					<tr>
						<td></td>
						<td></td>
					</tr>
					
				</tbody>
			</table>
		</section>

					<!-- About Express -->

		<section>
			<h2 id="express">Express</h2>
				<table class="table">
					<thead>
						<th><h3>Code</h3></th>
						<th><h3>Meaning</h3></th>
					</thead>
					<tbody>
						
						<tr>
							<td>npm install express --save</td>
							<td>Installs express and saves it in package.json</td>
						</tr>
						<tr>
							<td>Create app.js file</td>
							<td>The file where the app is gonna be built.</td>
						</tr>
						<tr>
							<td>const express = require('express');</td>
							<td>Imports express in app.js</td>
						</tr>
						<tr>
							<td>const app = express();</td>
							<td>Enables the creation of an express app</td>
						</tr>
						<tr>
							<td>app.use((req, res) => {<br>
								res.json({message: 'Your request has been received.'});<br>
							})</td>
							<td>Creates a response to the server.</td>
						</tr>
						<tr>
							<td>module.exports = app;</td>
							<td>So it can be accessed from the other files of the project (node server included).</td>
						</tr>
						<tr>
							<td>app.use((req, res, next) => {<br>
								smthg to do;<br>
								next();<br>
							}); </td>
							<td>Parameter (next) and function (next()) used to send a request from middleware to middleware.</td>
						</tr>
						<tr>
							<td>app.use('/api/stuff', (req, res, next) => {<br>
							})
							</td>
							<td>The first argument is the url path of where the middleware is supposed to be recorded.</td>
						</tr>
						<tr>
							<td>app.use((req, res, next) => {<br>
								res.setHeader('Access-Control-Allow-Origin', '*');<br>
								res.setHeader('Access-Control-Allow-Headers', 'Origin, X-Requested-With, Content, Accept, Content-Type, Authorization');<br>
								res.setHeader('Access-Control-Allow-Methods', 'GET, POST, PUT, DELETE, PATCH, OPTIONS');<br>
								next();<br>
							});</td>
							<td>Grants API access to any user.</td>
						</tr>
						<tr>
							<td>app.use(express.json());</td>
							<td>Handle posts requests with a Content-Type application/json by extracting a json objects and sending it to the server (we can use body parser too).</td>
						</tr>
						<tr>
							<td>app.get() app.post()</td>
							<td>Function used to get or post data.</td>
						</tr>
						<tr>
							<td>app.use()</td>
							<td>Responds to both get and post requests.</td>
						</tr>
						<tr>
							<td></td>
							<td></td>
						</tr>
						<tr>
							<td></td>
							<td></td>
						</tr>
						<tr>
							<td></td>
							<td></td>
						</tr>
						<tr>
							<td></td>
							<td></td>
						</tr>
						<tr>
							<td></td>
							<td></td>
						</tr>
						<tr>
							<td></td>
							<td></td>
						</tr>
						
					</tbody>
				</table>
			</section>
	</main>
</body>